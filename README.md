# Домашнее задание №1 по конфигурационному управлению
## Сделал студент группы ИКБО-11-23, Сафаров Александр Алексеевич
## Номер варианта: 20
## **Формулировка задачи**
Разработать эмулятор для языка оболочки ОС. Необходимо сделать работу эмулятора как можно более похожей на сеанс shell в UNIX-подобной ОС.
Эмулятор должен запускаться из реальной командной строки, а файл с
виртуальной файловой системой не нужно распаковывать у пользователя.
Эмулятор принимает образ виртуальной файловой системы в виде файла формата
tar. Эмулятор должен работать в режиме GUI.
Ключами командной строки задаются:
* Имя пользователя для показа в приглашении к вводу.
* Путь к архиву виртуальной файловой системы.
* Путь к лог-файлу.
/
Лог-файл имеет формат xml и содержит все действия во время последнего
сеанса работы с эмулятором. Для каждого действия указан пользователь.
/
Необходимо поддержать в эмуляторе команды ls, cd и exit, а также
следующие команды:/
1. pwd.
2. tree.

Все функции эмулятора должны быть покрыты тестами, а для каждой из
поддерживаемых команд необходимо написать 3 теста.
## Описание
Проект написан на языке программирования Python. Ссылка на проект: https://github.com/AleksandrSafarov/CONFIG_HW1
### Запуск программы
1. Склонировать проект
2. Перейти в папку с проектом в терминале
3. Ввести команду
```
python main.py --user <имя_пользователя> --tar <путь_к_файлу_tar_или_vfs.tar> --log <путь_xml_файлу>
```
### Запуск юнит тестов
1. Склонировать проект
2. Перейти в папку с проектом в терминале
3. Ввести команду
```
python -m unittest test.py
```

## Описание функций и настроек

### Аргументы

- `--user`: Имя пользователя, которое будет отображаться в приглашении к вводу.
- `--tar`: Путь к архиву виртуальной файловой системы в формате tar.
- `--log`: Путь к лог-файлу, в который будут записываться действия пользователя в формате XML.

### Классы и их функции

#### 1. Класс `VirtualFileSystem`

Этот класс отвечает за загрузку и взаимодействие с виртуальной файловой системой.

- **Методы**:
  - `__init__(self, tar_path)`: Конструктор, инициализирует корневую директорию и загружает содержимое tar-архива.
  - `load_tar(self, tar_path)`: Загружает содержимое tar-архива в структуру данных.
  - `ls(self)`: Возвращает список файлов и директорий в текущей директории.
  - `cd(self, dir_name)`: Меняет текущую директорию. Поддерживает переход на уровень вверх с помощью `..`.
  - `pwd(self)`: Возвращает путь к текущей директории.
  - `tree(self, dir=None, indent="")`: Рекурсивно выводит структуру директорий.

#### 2. Класс `Logger`

Этот класс отвечает за логирование действий пользователя.

- **Методы**:
  - `__init__(self, log_file, user)`: Конструктор, инициализирует лог-файл и имя пользователя.
  - `log(self, command)`: Записывает команду пользователя в лог с указанием времени и имени пользователя.
  - `save(self)`: Сохраняет записи лога в XML-файл.

### Функции

#### 1. `update_prompt()`

Обновляет приглашение командной строки, отображая текущее местоположение пользователя в файловой системе.

#### 2. `execute(event=None)`

Обрабатывает вводимые пользователем команды:
- Получает текст из поля ввода.
- Разделяет команду и аргументы.
- Выполняет соответствующие методы VFS и выводит результат или сообщение об ошибке.
- Логирует введенную команду.

#### 3. `display_welcome_message()`

Выводит приветственное сообщение для пользователя при запуске приложения.

### Интерфейс пользователя

- **Главное окно**: Заголовок отображает имя пользователя.
- **Поле вывода**: Используется для отображения результатов команд и сообщений об ошибках.
- **Поле ввода**: Позволяет пользователю вводить команды.
- **Кнопка "Execute"**: Выполняет команду, введенную в поле ввода.
- **Поддержка прокрутки**: Если вывод превышает размер окна, добавляется полоса прокрутки.

### Поддерживаемые команды

- `ls`: Выводит содержимое текущей директории.
- `cd <имя_директории>`: Переходит в указанную директорию.
- `pwd`: Выводит путь к текущей директории.
- `tree`: Отображает структуру файлов и директорий.
- `exit`: Выход из приложения и сохранение лога.

## Тестирование
Рисунок 1. Тестирование команды `tree`
![Image alt](https://github.com/AleksandrSafarov/CONFIG_HW1/blob/main/CONFIG_HW1/images/image1.png)

Рисунок 2. Тестирование команд `ls` и `cd`
![Image alt](https://github.com/AleksandrSafarov/CONFIG_HW1/blob/main/CONFIG_HW1/images/image2.png)

Рисунок 3. Тестирование команды `pwd`
![Image alt](https://github.com/AleksandrSafarov/CONFIG_HW1/blob/main/CONFIG_HW1/images/image3.png)

Рисунок 4. Результат тестирования с помощью unittest
![Image alt](https://github.com/AleksandrSafarov/CONFIG_HW1/blob/main/CONFIG_HW1/images/image4.png)
